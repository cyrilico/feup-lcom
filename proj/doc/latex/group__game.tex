\hypertarget{group__game}{}\section{game}
\label{group__game}\index{game@{game}}


Functions related with processing the main game.  


\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{struct_game}{Game}
\begin{DoxyCompactList}\small\item\em The \hyperlink{struct_game}{Game} \char`\"{}class\char`\"{}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__game_gabbbd2c8ccad22d7c741d231c59ad2aae}{}\label{group__game_gabbbd2c8ccad22d7c741d231c59ad2aae} 
\#define {\bfseries P\+L\+A\+Y\+E\+R\+\_\+\+N\+A\+M\+E\+\_\+\+X\+\_\+\+S\+T\+A\+RT}~300
\item 
\hypertarget{group__game_gaeff0876f335ad4ffc53f1bb9ac2d8eb0}{}\label{group__game_gaeff0876f335ad4ffc53f1bb9ac2d8eb0} 
\#define {\bfseries P\+L\+A\+Y\+E\+R\+\_\+\+N\+A\+M\+E\+\_\+\+Y\+\_\+\+S\+T\+A\+RT}~266
\item 
\hypertarget{group__game_gaeda0eab3e9262c2e92843302ff63ca9f}{}\label{group__game_gaeda0eab3e9262c2e92843302ff63ca9f} 
\#define {\bfseries P\+A\+U\+S\+E\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+X}~300
\item 
\hypertarget{group__game_ga089f5e3479ccaaf4704e916101355a1f}{}\label{group__game_ga089f5e3479ccaaf4704e916101355a1f} 
\#define {\bfseries P\+A\+U\+S\+E\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+Y}~264
\item 
\hypertarget{group__game_ga31e018c359c6fbfa916c1e07b60ef2b9}{}\label{group__game_ga31e018c359c6fbfa916c1e07b60ef2b9} 
\#define {\bfseries U\+N\+D\+E\+R\+S\+C\+O\+R\+E\+\_\+\+G\+AP}~67
\item 
\hypertarget{group__game_gaef21145f34ea5729cf657dbcd0bda945}{}\label{group__game_gaef21145f34ea5729cf657dbcd0bda945} 
\#define {\bfseries H\+I\+G\+H\+S\+C\+O\+R\+E\+\_\+\+N\+A\+M\+E\+\_\+X}~120
\item 
\hypertarget{group__game_ga216796b17d6ca2ee2d6388cf8633102d}{}\label{group__game_ga216796b17d6ca2ee2d6388cf8633102d} 
\#define {\bfseries H\+I\+G\+H\+S\+C\+O\+R\+E\+\_\+\+N\+A\+M\+E\+\_\+Y}~57
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__game_ga33d4db650f69082296cc8c864c785e15}{}\label{group__game_ga33d4db650f69082296cc8c864c785e15} 
typedef enum \hyperlink{group__game_gaa3df7fce134ae5843a2bd6cdcd5796d0}{gamestate\+\_\+t} \hyperlink{group__game_ga33d4db650f69082296cc8c864c785e15}{gamestate}
\begin{DoxyCompactList}\small\item\em Possible game states. \end{DoxyCompactList}\item 
\hypertarget{group__game_ga74f568c551e9db616e8fae5ed65be48d}{}\label{group__game_ga74f568c551e9db616e8fae5ed65be48d} 
typedef enum \hyperlink{group__game_gab8e853703f9cb99b52ba53bcf16b5c4a}{scorenamestate\+\_\+t} \hyperlink{group__game_ga74f568c551e9db616e8fae5ed65be48d}{scorenamestate}
\begin{DoxyCompactList}\small\item\em Possible game session\textquotesingle{}s name receiving states. \end{DoxyCompactList}\item 
\hypertarget{group__game_gab1e4078b5fa77cbf79de5e160f4cb261}{}\label{group__game_gab1e4078b5fa77cbf79de5e160f4cb261} 
typedef enum \hyperlink{group__game_ga9984788ca86b30e008e68a755caeb998}{gamedrawstate\+\_\+t} \hyperlink{group__game_gab1e4078b5fa77cbf79de5e160f4cb261}{gamedrawstate}
\begin{DoxyCompactList}\small\item\em Possible game drawing states. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__game_gaa3df7fce134ae5843a2bd6cdcd5796d0}{}\label{group__game_gaa3df7fce134ae5843a2bd6cdcd5796d0} 
enum \hyperlink{group__game_gaa3df7fce134ae5843a2bd6cdcd5796d0}{gamestate\+\_\+t} \{ {\bfseries G\+A\+M\+E\+\_\+\+R\+U\+N\+N\+I\+NG}, 
{\bfseries G\+A\+M\+E\+\_\+\+P\+A\+U\+S\+ED}, 
{\bfseries G\+A\+M\+E\+\_\+\+S\+C\+O\+RE}, 
{\bfseries G\+A\+M\+E\+\_\+\+O\+V\+ER}
 \}\begin{DoxyCompactList}\small\item\em Possible game states. \end{DoxyCompactList}
\item 
\hypertarget{group__game_gab8e853703f9cb99b52ba53bcf16b5c4a}{}\label{group__game_gab8e853703f9cb99b52ba53bcf16b5c4a} 
enum \hyperlink{group__game_gab8e853703f9cb99b52ba53bcf16b5c4a}{scorenamestate\+\_\+t} \{ \newline
{\bfseries F\+I\+R\+S\+T\+\_\+\+L\+E\+T\+T\+ER}, 
{\bfseries S\+E\+C\+O\+N\+D\+\_\+\+L\+E\+T\+T\+ER}, 
{\bfseries T\+H\+I\+R\+D\+\_\+\+L\+E\+T\+T\+ER}, 
{\bfseries F\+O\+U\+R\+T\+H\+\_\+\+L\+E\+T\+T\+ER}, 
\newline
{\bfseries N\+A\+M\+E\+\_\+\+R\+E\+C\+E\+I\+V\+ED}
 \}\begin{DoxyCompactList}\small\item\em Possible game session\textquotesingle{}s name receiving states. \end{DoxyCompactList}
\item 
\hypertarget{group__game_ga9984788ca86b30e008e68a755caeb998}{}\label{group__game_ga9984788ca86b30e008e68a755caeb998} 
enum \hyperlink{group__game_ga9984788ca86b30e008e68a755caeb998}{gamedrawstate\+\_\+t} \{ {\bfseries D\+O\+N\+T\+D\+R\+AW}, 
{\bfseries D\+R\+AW}
 \}\begin{DoxyCompactList}\small\item\em Possible game drawing states. \end{DoxyCompactList}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{struct_game}{Game} $\ast$ \hyperlink{group__game_gaabb10419dbd089ed1f572a817bea10ee}{create\+\_\+game} ()
\begin{DoxyCompactList}\small\item\em Creates a new game session. \end{DoxyCompactList}\item 
int \hyperlink{group__game_ga419536b6c803dd698c45680932477690}{determine\+\_\+index} (int bullet\+\_\+x)
\begin{DoxyCompactList}\small\item\em Calculates the index of the obstacle to test collision with (used for bullet-\/obstacle collisions) \end{DoxyCompactList}\item 
void \hyperlink{group__game_gaf0f9fdea8b3749557a89193e12153e1e}{update\+\_\+game\+\_\+running} (\hyperlink{struct_game}{Game} $\ast$game)
\begin{DoxyCompactList}\small\item\em Updates a game session that hasn\textquotesingle{}t finished yet. \end{DoxyCompactList}\item 
void \hyperlink{group__game_gaae19b3df5cdf51786306772dc362cc78}{game\+\_\+score\+\_\+event\+\_\+handler} (\hyperlink{struct_game}{Game} $\ast$game, char current\+\_\+key)
\begin{DoxyCompactList}\small\item\em Updates the current session\textquotesingle{}s name letter receiving state machine according to latest key received from user input. \end{DoxyCompactList}\item 
void \hyperlink{group__game_ga7fb225326dc8e9874c6ae3ac8b92e590}{update\+\_\+game\+\_\+score} (\hyperlink{struct_game}{Game} $\ast$game)
\begin{DoxyCompactList}\small\item\em Updates a game session that has finished (and therefore is on the final score screen) \end{DoxyCompactList}\item 
void \hyperlink{group__game_ga6d509d99fcf7deead2ccb896bfce5b78}{detect\+\_\+game\+\_\+end} (\hyperlink{struct_game}{Game} $\ast$game)
\begin{DoxyCompactList}\small\item\em Checks if a game has ended (if player got pushed off-\/screen by an obstacle). Updates the attribute gamestate if necessary. \end{DoxyCompactList}\item 
void \hyperlink{group__game_ga60f9b07b784e68d3c43cc63c54847e92}{update\+\_\+draw\+\_\+state} (\hyperlink{struct_game}{Game} $\ast$game)
\begin{DoxyCompactList}\small\item\em Every time it is called it flips the game\textquotesingle{}s attribute drawstate. Options are D\+O\+N\+T\+D\+R\+AW and D\+R\+AW (guarantees 30fps game) \end{DoxyCompactList}\item 
void \hyperlink{group__game_ga0e5a63798b2083168206005d4b9dcd83}{draw\+\_\+game} (\hyperlink{struct_game}{Game} $\ast$game)
\begin{DoxyCompactList}\small\item\em Copies frame stored in menu\textquotesingle{}s secondary buffer to the main buffer (video\+\_\+mem) \end{DoxyCompactList}\item 
int \hyperlink{group__game_gac31aaf764e55a4a6de1082340f7e5ed8}{add\+\_\+bullet\+\_\+shot} (\hyperlink{struct_game}{Game} $\ast$game, int x, int y)
\begin{DoxyCompactList}\small\item\em Tries to shoot a bullet from the player\textquotesingle{}s position. \end{DoxyCompactList}\item 
void \hyperlink{group__game_ga11217e4d270598c9ab99d632d090b942}{delete\+\_\+game} (\hyperlink{struct_game}{Game} $\ast$game)
\begin{DoxyCompactList}\small\item\em Frees dynamically reserved memory and deletes \textquotesingle{}object\textquotesingle{}. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Functions related with processing the main game. 



\subsection{Function Documentation}
\hypertarget{group__game_gac31aaf764e55a4a6de1082340f7e5ed8}{}\label{group__game_gac31aaf764e55a4a6de1082340f7e5ed8} 
\index{game@{game}!add\+\_\+bullet\+\_\+shot@{add\+\_\+bullet\+\_\+shot}}
\index{add\+\_\+bullet\+\_\+shot@{add\+\_\+bullet\+\_\+shot}!game@{game}}
\subsubsection{\texorpdfstring{add\+\_\+bullet\+\_\+shot()}{add\_bullet\_shot()}}
{\footnotesize\ttfamily int add\+\_\+bullet\+\_\+shot (\begin{DoxyParamCaption}\item[{\hyperlink{struct_game}{Game} $\ast$}]{game,  }\item[{int}]{x,  }\item[{int}]{y }\end{DoxyParamCaption})}



Tries to shoot a bullet from the player\textquotesingle{}s position. 

Note that it may not be possible to shoot a bullet if there are already M\+A\+X\+\_\+\+B\+U\+L\+L\+E\+T\+S\+\_\+\+O\+N\+\_\+\+S\+C\+R\+E\+EN bullets on-\/screen This limit was implemented to avoid too many calculations that could cause lag


\begin{DoxyParams}{Parameters}
{\em game} & \hyperlink{struct_game}{Game} \textquotesingle{}object\textquotesingle{} where the bullet will possibly be shot from \\
\hline
{\em x} & X-\/coordinate of player\textquotesingle{}s bitmap\textquotesingle{}s top left corner \\
\hline
{\em y} & Y-\/coordinate of player\textquotesingle{}s bitmap\textquotesingle{}s top left corner \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if successfully shot bullet, 0 otherwise 
\end{DoxyReturn}
\hypertarget{group__game_gaabb10419dbd089ed1f572a817bea10ee}{}\label{group__game_gaabb10419dbd089ed1f572a817bea10ee} 
\index{game@{game}!create\+\_\+game@{create\+\_\+game}}
\index{create\+\_\+game@{create\+\_\+game}!game@{game}}
\subsubsection{\texorpdfstring{create\+\_\+game()}{create\_game()}}
{\footnotesize\ttfamily \hyperlink{struct_game}{Game}$\ast$ create\+\_\+game (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Creates a new game session. 

\begin{DoxyReturn}{Returns}
Pointer to initialized \hyperlink{struct_game}{Game} 
\end{DoxyReturn}
\hypertarget{group__game_ga11217e4d270598c9ab99d632d090b942}{}\label{group__game_ga11217e4d270598c9ab99d632d090b942} 
\index{game@{game}!delete\+\_\+game@{delete\+\_\+game}}
\index{delete\+\_\+game@{delete\+\_\+game}!game@{game}}
\subsubsection{\texorpdfstring{delete\+\_\+game()}{delete\_game()}}
{\footnotesize\ttfamily void delete\+\_\+game (\begin{DoxyParamCaption}\item[{\hyperlink{struct_game}{Game} $\ast$}]{game }\end{DoxyParamCaption})}



Frees dynamically reserved memory and deletes \textquotesingle{}object\textquotesingle{}. 


\begin{DoxyParams}{Parameters}
{\em game} & \hyperlink{struct_game}{Game} \textquotesingle{}object\textquotesingle{} to be deleted \\
\hline
\end{DoxyParams}
\hypertarget{group__game_ga6d509d99fcf7deead2ccb896bfce5b78}{}\label{group__game_ga6d509d99fcf7deead2ccb896bfce5b78} 
\index{game@{game}!detect\+\_\+game\+\_\+end@{detect\+\_\+game\+\_\+end}}
\index{detect\+\_\+game\+\_\+end@{detect\+\_\+game\+\_\+end}!game@{game}}
\subsubsection{\texorpdfstring{detect\+\_\+game\+\_\+end()}{detect\_game\_end()}}
{\footnotesize\ttfamily void detect\+\_\+game\+\_\+end (\begin{DoxyParamCaption}\item[{\hyperlink{struct_game}{Game} $\ast$}]{game }\end{DoxyParamCaption})}



Checks if a game has ended (if player got pushed off-\/screen by an obstacle). Updates the attribute gamestate if necessary. 


\begin{DoxyParams}{Parameters}
{\em game} & \hyperlink{struct_game}{Game} \textquotesingle{}object\textquotesingle{} to be updated \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__game_ga33d4db650f69082296cc8c864c785e15}{gamestate} 
\end{DoxySeeAlso}
\hypertarget{group__game_ga419536b6c803dd698c45680932477690}{}\label{group__game_ga419536b6c803dd698c45680932477690} 
\index{game@{game}!determine\+\_\+index@{determine\+\_\+index}}
\index{determine\+\_\+index@{determine\+\_\+index}!game@{game}}
\subsubsection{\texorpdfstring{determine\+\_\+index()}{determine\_index()}}
{\footnotesize\ttfamily int determine\+\_\+index (\begin{DoxyParamCaption}\item[{int}]{bullet\+\_\+x }\end{DoxyParamCaption})}



Calculates the index of the obstacle to test collision with (used for bullet-\/obstacle collisions) 

This functions avoids an unecessary amount of calculations (for every bullet, check every obstacle until one is in its way) which would slow down the game pace a lot


\begin{DoxyParams}{Parameters}
{\em bullet\+\_\+x} & X-\/coordinate of bullet to test obstacle alignment with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
index of obstacle in the array in case there\textquotesingle{}s an obstacle in the bullet\textquotesingle{}s way, -\/1 if clear path 
\end{DoxyReturn}
\hypertarget{group__game_ga0e5a63798b2083168206005d4b9dcd83}{}\label{group__game_ga0e5a63798b2083168206005d4b9dcd83} 
\index{game@{game}!draw\+\_\+game@{draw\+\_\+game}}
\index{draw\+\_\+game@{draw\+\_\+game}!game@{game}}
\subsubsection{\texorpdfstring{draw\+\_\+game()}{draw\_game()}}
{\footnotesize\ttfamily void draw\+\_\+game (\begin{DoxyParamCaption}\item[{\hyperlink{struct_game}{Game} $\ast$}]{game }\end{DoxyParamCaption})}



Copies frame stored in menu\textquotesingle{}s secondary buffer to the main buffer (video\+\_\+mem) 


\begin{DoxyParams}{Parameters}
{\em game} & \hyperlink{struct_game}{Game} \textquotesingle{}object\textquotesingle{} where the next frame to be drawn is stored \\
\hline
\end{DoxyParams}
\hypertarget{group__game_gaae19b3df5cdf51786306772dc362cc78}{}\label{group__game_gaae19b3df5cdf51786306772dc362cc78} 
\index{game@{game}!game\+\_\+score\+\_\+event\+\_\+handler@{game\+\_\+score\+\_\+event\+\_\+handler}}
\index{game\+\_\+score\+\_\+event\+\_\+handler@{game\+\_\+score\+\_\+event\+\_\+handler}!game@{game}}
\subsubsection{\texorpdfstring{game\+\_\+score\+\_\+event\+\_\+handler()}{game\_score\_event\_handler()}}
{\footnotesize\ttfamily void game\+\_\+score\+\_\+event\+\_\+handler (\begin{DoxyParamCaption}\item[{\hyperlink{struct_game}{Game} $\ast$}]{game,  }\item[{char}]{current\+\_\+key }\end{DoxyParamCaption})}



Updates the current session\textquotesingle{}s name letter receiving state machine according to latest key received from user input. 


\begin{DoxyParams}{Parameters}
{\em game} & \hyperlink{struct_game}{Game} \textquotesingle{}object\textquotesingle{} to be updated \\
\hline
{\em current\+\_\+key} & Latest key obtained from user input \\
\hline
\end{DoxyParams}
\hypertarget{group__game_ga60f9b07b784e68d3c43cc63c54847e92}{}\label{group__game_ga60f9b07b784e68d3c43cc63c54847e92} 
\index{game@{game}!update\+\_\+draw\+\_\+state@{update\+\_\+draw\+\_\+state}}
\index{update\+\_\+draw\+\_\+state@{update\+\_\+draw\+\_\+state}!game@{game}}
\subsubsection{\texorpdfstring{update\+\_\+draw\+\_\+state()}{update\_draw\_state()}}
{\footnotesize\ttfamily void update\+\_\+draw\+\_\+state (\begin{DoxyParamCaption}\item[{\hyperlink{struct_game}{Game} $\ast$}]{game }\end{DoxyParamCaption})}



Every time it is called it flips the game\textquotesingle{}s attribute drawstate. Options are D\+O\+N\+T\+D\+R\+AW and D\+R\+AW (guarantees 30fps game) 


\begin{DoxyParams}{Parameters}
{\em game} & \hyperlink{struct_game}{Game} \textquotesingle{}object\textquotesingle{} to be updated \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__game_gab1e4078b5fa77cbf79de5e160f4cb261}{gamedrawstate} 
\end{DoxySeeAlso}
\hypertarget{group__game_gaf0f9fdea8b3749557a89193e12153e1e}{}\label{group__game_gaf0f9fdea8b3749557a89193e12153e1e} 
\index{game@{game}!update\+\_\+game\+\_\+running@{update\+\_\+game\+\_\+running}}
\index{update\+\_\+game\+\_\+running@{update\+\_\+game\+\_\+running}!game@{game}}
\subsubsection{\texorpdfstring{update\+\_\+game\+\_\+running()}{update\_game\_running()}}
{\footnotesize\ttfamily void update\+\_\+game\+\_\+running (\begin{DoxyParamCaption}\item[{\hyperlink{struct_game}{Game} $\ast$}]{game }\end{DoxyParamCaption})}



Updates a game session that hasn\textquotesingle{}t finished yet. 

More specifically, this function\+:
\begin{DoxyItemize}
\item Updates each obstacle\textquotesingle{}s position in the obstacle matrix, generating a new matrix of obstacles if the old one goes off-\/screen and the game is still running
\item Uses determine\+\_\+index to check if a bullet has collided with an obstacle, and, if so, delete the bullet and update the obstacle. This is done for all bullets
\item Updates the player\textquotesingle{}s position in case of a collision with an object
\item Updates the player\textquotesingle{}s score (this function is called every timer0 interrupt)
\item Generates a new bonus for the player, if it is the case
\item Updates the game\textquotesingle{}s difficulty based on average number of lives of newly created obstacles, if it is the case
\item Prepares the next frame to be drawn
\item Detects if game session has ended (if player gets pushed off-\/screen by an obstacle)
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em game} & \hyperlink{struct_game}{Game} \textquotesingle{}object\textquotesingle{} to be updated \\
\hline
\end{DoxyParams}
\hypertarget{group__game_ga7fb225326dc8e9874c6ae3ac8b92e590}{}\label{group__game_ga7fb225326dc8e9874c6ae3ac8b92e590} 
\index{game@{game}!update\+\_\+game\+\_\+score@{update\+\_\+game\+\_\+score}}
\index{update\+\_\+game\+\_\+score@{update\+\_\+game\+\_\+score}!game@{game}}
\subsubsection{\texorpdfstring{update\+\_\+game\+\_\+score()}{update\_game\_score()}}
{\footnotesize\ttfamily void update\+\_\+game\+\_\+score (\begin{DoxyParamCaption}\item[{\hyperlink{struct_game}{Game} $\ast$}]{game }\end{DoxyParamCaption})}



Updates a game session that has finished (and therefore is on the final score screen) 

More specifically, this function\+:
\begin{DoxyItemize}
\item Calls game\+\_\+score\+\_\+event\+\_\+handler (this function every time there is a new user input)
\item Prepares the next frame to be drawn
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em game} & \hyperlink{struct_game}{Game} \textquotesingle{}object\textquotesingle{} to be updated \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__game_gaae19b3df5cdf51786306772dc362cc78}{game\+\_\+score\+\_\+event\+\_\+handler} 
\end{DoxySeeAlso}
